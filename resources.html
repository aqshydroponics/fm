<!-- Paste this where you want the Resources section -->
<section id="resources" aria-label="Hydroponics Resources" class="resources-section">
  <div class="rs-header">
    <h2>Hydroponics: Resources & Research</h2>
    <p class="rs-sub">Search, filter, and explore curated research, guides, and media about hydroponics, aeroponics, water use, growth rates, and NASA space trials.</p>
    <div class="rs-controls">
      <input id="rs-search" type="search" placeholder="Search resources (title, tag, summary)..." />
      <select id="rs-filter">
        <option value="all">All types</option>
        <option value="research">Research / Review</option>
        <option value="guides">Guides / Extension</option>
        <option value="space">NASA / Space</option>
        <option value="media">Media / News</option>
      </select>
      <button id="rs-export">Export CSV</button>
    </div>
  </div>

  <div id="rs-list" class="rs-list"></div>

  <div class="rs-footer">
    <div id="rs-pagination" class="rs-pagination"></div>
  </div>

  <!-- Modal for full details -->
  <div id="rs-modal" class="rs-modal" aria-hidden="true">
    <div class="rs-modal-content">
      <button class="rs-close" id="rs-close">✕</button>
      <h3 id="modal-title"></h3>
      <p id="modal-summary"></p>
      <p><strong>Tags:</strong> <span id="modal-tags"></span></p>
      <p><strong>Source:</strong> <a id="modal-link" href="#" target="_blank" rel="noopener noreferrer">Open source</a></p>
      <p class="rs-cite" id="modal-cite"></p>
      <div class="rs-modal-actions">
        <button id="rs-copy-cite">Copy citation</button>
        <button id="rs-open-source">Open source</button>
      </div>
    </div>
  </div>
</section>

<style>
.resources-section {
  font-family: Inter, system-ui, Arial;
  padding: 28px;
  background: #f7faf6;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}
.rs-header h2 {
  margin: 0 0 6px;
  color: #234;
  font-family: "Garamond", serif;
}
.rs-sub {
  margin: 0 0 16px;
  color: #47525a;
}
.rs-controls {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-bottom: 12px;
  flex-wrap: wrap;
}
#rs-search {
  padding: 10px 12px;
  flex: 1;
  min-width: 220px;
  border-radius: 8px;
  border: 1px solid #d7e0dc;
}
#rs-filter {
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #d7e0dc;
}
#rs-export {
  padding: 10px 12px;
  border-radius: 8px;
  background: #e6f0e9;
  border: 1px solid #c8dfcf;
  cursor: pointer;
}
.rs-list {
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
}
.rs-card {
  background: white;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #eef4ef;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.rs-card h4 {
  margin: 0;
  font-size: 16px;
  color: #123;
}
.rs-card p {
  margin: 0;
  color: #546;
  font-size: 13px;
}
.rs-tags {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.rs-tag {
  background: #eef6f0;
  padding: 4px 8px;
  border-radius: 999px;
  font-size: 12px;
  color: #236;
}
.rs-actions {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}
.rs-btn {
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid #d7e0dc;
  background: #fff;
  cursor: pointer;
  font-size: 13px;
}
.rs-modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.rs-modal-content {
  background: white;
  width: min(760px, 95%);
  padding: 18px;
  border-radius: 12px;
  position: relative;
}
.rs-close {
  position: absolute;
  right: 10px;
  top: 8px;
  background: transparent;
  border: none;
  font-size: 18px;
  cursor: pointer;
}
.rs-cite {
  font-size: 12px;
  color: #666;
  margin-top: 8px;
}
.rs-modal-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}
.rs-pagination {
  margin-top: 14px;
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.rs-page {
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid #e1e8e3;
  cursor: pointer;
  background: white;
}
</style>

<script>
// ---------- RESOURCES DATA ----------
// All resource objects included here
const resources = [
  {
    id:1,
    title:"VEGGIE Vegetable Production System NASA",
    summary:"NASA's Veggie plant growth system on the ISS; salads and leafy crops grown to study plant biology in microgravity.",
    url:"https://science.nasa.gov/mission/veggie/",
    tags:["space","NASA","experiment"],
    citeText:"NASA Veggie mission page.",
    citeMark:"[oai_citation:4 NASA Science](https://science.nasa.gov/mission/veggie/)"
  },
  {
    id:2,
    title:"Growing Plants in Space NASA overview Advanced Plant Habitat",
    summary:"NASA's Advanced Plant Habitat (APH) — a growth chamber with controlled lighting, sensors, and substrate used aboard the ISS.",
    url:"https://www.nasa.gov/exploration-research-and-technology/growing-plants-in-space/",
    tags:["space","NASA","habitat"],
    citeText:"NASA APH overview.",
    citeMark:"[oai_citation:5 NASA](https://www.nasa.gov/exploration-research-and-technology/growing-plants-in-space/)"
  },
  {
    id:3,
    title:"ISS National Lab Vegetable Production System Veggie",
    summary:"Technical and outreach description of Veggie on the ISS and the ISS National Lab's role.",
    url:"https://issnationallab.org/facilities/vegetable-production-system/",
    tags:["space","ISS","veg"],
    citeText:"ISS National Lab Veggie facility page.",
    citeMark:"[oai_citation:6 ISS National Lab](https://issnationallab.org/facilities/vegetable-production-system/)"
  },
  {
    id:4,
    title:"Hydroponics fundamentals FAO guidance and overview",
    summary:"Food and Agriculture Organization (FAO) overview of hydroponics fundamentals and pros/cons for global food systems.",
    url:"https://www.fao.org/plant-production-protection/news-and-events/news/news-detail/growing-without-soil--hydroponics-fundamentals--pros-and-cons/en",
    tags:["guide","FAO","fundamentals"],
    citeText:"FAO hydroponics fundamentals page.",
    citeMark:"[oai_citation:7 FAOHome](https://www.fao.org/plant-production-protection/news-and-events/news/news-detail/growing-without-soil--hydroponics-fundamentals--pros-and-cons/en)"
  },
  {
    id:5,
    title:"Water use and efficiency in hydroponics review & comparisons",
    summary:"Peer-reviewed analyses and studies showing soilless systems often use much less water (examples report 70–90% savings or use as low as 10% of conventional water).",
    url:"https://www.mdpi.com/1996-1073/16/4/1690",
    tags:["research","water","efficiency"],
    citeText:"MDPI review on hydroponics and resource usage.",
    citeMark:"[oai_citation:8 MDPI](https://www.mdpi.com/1996-1073/16/4/1690)"
  },
  {
    id:6,
    title:"Hydroponics current trends in sustainable crop production review PMC",
    summary:"Comprehensive review of modern hydroponics, sensors, automation, and sustainability trends (open access).",
    url:"https://pmc.ncbi.nlm.nih.gov/articles/PMC10625363/",
    tags:["research","review","sustainability"],
    citeText:"Comprehensive PMC review (2024+).",
    citeMark:"[oai_citation:9 PMC](https://pmc.ncbi.nlm.nih.gov/articles/PMC10625363/)"
  },
  {
    id:7,
    title:"Controlled comparisons between soil and hydroponic systems journal",
    summary:"Study comparing transpiration, water efficiency, and yields between hydroponic and soil systems (data-backed).",
    url:"https://pmc.ncbi.nlm.nih.gov/articles/PMC7885021/",
    tags:["research","comparison","water"],
    citeText:"PMC comparative study.",
    citeMark:"[oai_citation:10 PMC](https://pmc.ncbi.nlm.nih.gov/articles/PMC7885021/)"
  },
  {
    id:8,
    title:"Greenhouse Management Hydroponics saves water industry article",
    summary:"Industry resource describing typical water savings (70–90%), yield improvements, and operational notes.",
    url:"https://www.greenhousemag.com/news/hydroponics-provides-major-water-savings/",
    tags:["industry","water","stats"],
    citeText:"Greenhouse Management article on water savings.",
    citeMark:"[oai_citation:11 GreenhouseMag](https://www.greenhousemag.com/news/hydroponics-provides-major-water-savings/)"
  },
  {
    id:9,
    title:"Hydroponics guide Cornell University Home hydroponics & curricula",
    summary:"Cornell guides and curricula for home and small-scale hydroponics (calculators and handbooks).",
    url:"https://cea.cals.cornell.edu/crops/",
    tags:["extension","cornell","guide"],
    citeText:"Cornell CEA hydroponics resources.",
    citeMark:"[oai_citation:12 CEA Cornell](https://cea.cals.cornell.edu/crops/)"
  },
  {
    id:10,
    title:"A Guide to Home Hydroponics for Leafy Greens Purdue extension PDF",
    summary:"Practical guide for building and running deep water culture, NFT, and other home hydroponic setups (PDF).",
    url:"https://www.purdue.edu/hla/sites/master-gardener/wp-content/uploads/sites/9/2022/10/Guide-To-Home-Hydroponics-For-Leafy-Greens-Ronzoni-and-Mattson-2020.pdf",
    tags:["guide","extension","PDF"],
    citeText:"Purdue home hydroponics guide PDF.",
    citeMark:"[oai_citation:13 Purdue](https://www.purdue.edu/hla/sites/master-gardener/wp-content/uploads/sites/9/2022/10/Guide-To-Home-Hydroponics-For-Leafy-Greens-Ronzoni-and-Mattson-2020.pdf)"
  },
  {
    id:11,
    title:"Cornell Grow with the Flow curriculum PDF",
    summary:"Curriculum for running hydroponic learning units in schools and labs—lesson plans and activities.",
    url:"https://ecommons.cornell.edu/bitstream/handle/1813/3283/Grow%20with%20the%20Flow.pdf",
    tags:["curriculum","education","cornell"],
    citeText:"Cornell curriculum PDF.",
    citeMark:"[oai_citation:14 eCommons](https://ecommons.cornell.edu/bitstream/handle/1813/3283/Grow%20with%20the%20Flow.pdf)"
  },
  {
    id:12,
    title:"Michigan State University Hydroponics at home extension PDF",
    summary:"Historical extension guidance for small-scale and hobby hydroponic systems; practical tips and safety.",
    url:"https://archive.lib.msu.edu/DMC/extension_publications/e1853/e1853-1985.pdf",
    tags:["extension","MSU","PDF"],
    citeText:"MSU hydroponics at home PDF.",
    citeMark:"[oai_citation:15 MSU](https://archive.lib.msu.edu/DMC/extension_publications/e1853/e1853-1985.pdf)"
  },
  {
    id:13,
    title:"Recent ScienceDirect review Hydroponics & sustainable tech",
    summary:"Recent articles evaluating hydroponics in sustainable, climate-resilient production systems (sensorization + automation).",
    url:"https://www.sciencedirect.com/science/article/pii/S2405844024028548",
    tags:["research","sustainability","automation"],
    citeText:"ScienceDirect article on modern hydroponics tech.",
    citeMark:"[oai_citation:16 ScienceDirect](https://www.sciencedirect.com/science/article/pii/S2405844024028548)"
  },
  {
    id:14,
    title:"Profile NASA collaboration overview press on ISS plant experiments",
    summary:"Examples of tech used aboard the ISS and commercial profile technologies used for crop growth in controlled systems.",
    url:"https://www.profileevs.com/about-profile/press-room/nasa-explores-new-crop-growth-aboard-iss-using-two-profile-products-technologies",
    tags:["space","press","technology"],
    citeText:"Profile / NASA press piece about ISS experiments.",
    citeMark:"[oai_citation:17 ProfileEVS](https://www.profileevs.com/about-profile/press-room/nasa-explores-new-crop-growth-aboard-iss-using-two-profile-products-technologies)"
  },
  {
    id:15,
    title:"Wired Space farming & peppers on the ISS",
    summary:"Journalistic coverage of growing peppers and the APH advances on the ISS (useful for public‑facing storytelling).",
    url:"https://www.wired.com/story/growing-peppers-on-the-iss-is-just-the-start-of-space-farming",
    tags:["media","space","story"],
    citeText:"Wired article on ISS crop experiments.",
    citeMark:"[oai_citation:18 WIRED](https://www.wired.com/story/growing-peppers-on-the-iss-is-just-the-start-of-space-farming)"
  },
  {
    id:16,
    title:"Times of India indoor hydroponics project case study",
    summary:"Recent example of hydroponics/aeroponics used in institutional projects with water‑use stats and results.",
    url:"https://timesofindia.indiatimes.com/city/indore/future-of-farming-growing-crops-indoors-without-soil-sunlight/articleshow/121347053.cms",
    tags:["case‑study","news","water"],
    citeText:"Times of India indoor hydroponics project story.",
    citeMark:"[oai_citation:19 TOI](https://timesofindia.indiatimes.com/city/indore/future-of-farming-growing-crops-indoors-without-soil-sunlight/articleshow/121347053.cms)"
  },
  {
    id:17,
    title:"Greenhouse practical overview Hydroponics vs soil industry blog",
    summary:"Practical notes for growers: yield, growth‑speed comparisons, and notes on operational tradeoffs.",
    url:"https://airgarden.com.au/blogs/news/hydroponics-vs-soil-growing-whats-the-difference",
    tags:["practical","grower","comparison"],
    citeText:"Grower blog summarizing empirical differences (growth rate & yield).",
    citeMark:"[oai_citation:20 Airgarden](https://airgarden.com.au/blogs/news/hydroponics-vs-soil-growing-whats-the-difference)"
  },
  {
    id:18,
    title:"Research PDF Comparison Hydroponic vs soil systems UNR publication",
    summary:"Field‑ and greenhouse‑based comparisons for strawberry and vegetable production (PDF).",
    url:"https://naes.agnt.unr.edu/PMS/Pubs/309_2017_03.pdf",
    tags:["research","pdf","comparison"],
    citeText:"UNR comparative PDF on strawberries and hydroponic systems.",
    citeMark:"[oai_citation:21 UNR](https://naes.agnt.unr.edu/PMS/Pubs/309_2017_03.pdf)"
  },
  {
    id:19,
    title:"Practical blog How Hydroponics Works Food Revolution Network",
    summary:"Introductory but well‑structured explanation for newcomers, with pros/cons and starting tips.",
    url:"https://foodrevolution.org/blog/hydroponics/",
    tags:["intro","guide","blog"],
    citeText:"Food Revolution Network introduction to hydroponics.",
    citeMark:"[oai_citation:22 FRN](https://foodrevolution.org/blog/hydroponics/)"
  },
  {
    id:20,
    title:"Comparing yield nutrient uptake and water use efficiency ScienceDirect",
    summary:"Recent article comparing WUE and yields across hydroponic, aquaponic and soil systems with measured data.",
    url:"https://www.sciencedirect.com/science/article/pii/S2405844025007194",
    tags:["research","wue","yield"],
    citeText:"ScienceDirect comparative research (2024‑2025).",
    citeMark:"[oai_citation:23 SD](https://www.sciencedirect.com/science/article/pii/S2405844025007194)"
  },
  {
    id:21,
    title:"ISS Veggie hardware details NASA OSDR",
    summary:"Hardware‑level documentation for the Veggie root mat, pillows, and watering approach (useful for technical builds).",
    url:"https://osdr.nasa.gov/bio/repo/data/hardware/1397",
    tags:["space","hardware","technical"],
    citeText:"NASA OSDR Veggie hardware repo.",
    citeMark:"[oai_citation:24 NASA](https://osdr.nasa.gov/bio/repo/data/hardware/1397)"
  },
  {
    id:22,
    title:"Practical Home Hydroponics Guide coverage Hortidaily news about Cornell guide",
    summary:"News coverage about the Cornell home hydroponics guide (linking to the downloadable resource).",
    url:"https://www.hortidaily.com/article/9230019/home-hydroponics-guide-released-from-cornell-university/",
    tags:["news","guide","cornell"],
    citeText:"Hortidaily report on Cornell guide.",
    citeMark:"[oai_citation:25 Hortidaily](https://www.hortidaily.com/article/9230019/home-hydroponics-guide-released-from-cornell-university/)"
  },
  {
    id:23,
    title:"UMN Extension Small‑scale hydroponics guide",
    summary:"User‑friendly extension guidance for small‑scale and year‑round hydroponic production (practical tips).",
    url:"https://extension.umn.edu/how/small-scale-hydroponics",
    tags:["extension","guide","UMN"],
    citeText:"UMN small‑scale hydroponics page.",
    citeMark:"[oai_citation:26 UMN](https://extension.umn.edu/how/small-scale-hydroponics)"
  },
  {
    id:24,
    title:"Journal article An Overview of Soil and Soilless Cultivation Techniques",
    summary:"Open access review comparing soil and soilless cultivation methods and tradeoffs (PMC).",
    url:"https://pmc.ncbi.nlm.nih.gov/articles/PMC9102199/",
    tags:["review","comparison","PMC"],
    citeText:"PMC review of soil vs soilless cultivation.",
    citeMark:"[oai_citation:27 PMC](https://pmc.ncbi.nlm.nih.gov/articles/PMC9102199/)"
  },
  {
    id:25,
    title:"A Recipe for Hydroponic Success Cornell nutrient recipes PDF",
    summary:"Practical nutrient recipes and water/EC management tips for hydroponic growers.",
    url:"https://hort.cornell.edu/greenhouse/crops/factsheets/hydroponic-recipes.pdf",
    tags:["practical","recipes","cornell"],
    citeText:"Cornell hydroponic recipes PDF.",
    citeMark:"[oai_citation:28 Cornell](https://hort.cornell.edu/greenhouse/crops/factsheets/hydroponic-recipes.pdf)"
  }
];

// ------------ Constants & State ------------
const PAGE_SIZE = 8;
let currentPage = 1;

// ------------ Utility ------------
function escapeHtml(text) {
  const div = document.createElement("div");
  div.textContent = text;
  return div.innerHTML;
}

// ------------ Render List & Filtering ------------
function renderList(page = 1, filter = "all", q = "") {
  const rsList = document.getElementById("rs-list");
  rsList.innerHTML = "";
  let items = resources.slice();

  if (filter !== "all") {
    items = items.filter(it => it.tags.includes(filter));
  }
  if (q && q.trim().length > 0) {
    const qq = q.toLowerCase();
    items = items.filter(it =>
      it.title.toLowerCase().includes(qq) ||
      it.summary.toLowerCase().includes(qq) ||
      it.tags.join(" ").toLowerCase().includes(qq)
    );
  }

  const total = items.length;
  const pages = Math.max(1, Math.ceil(total / PAGE_SIZE));
  currentPage = Math.min(page, pages);

  const start = (currentPage - 1) * PAGE_SIZE;
  const paged = items.slice(start, start + PAGE_SIZE);

  paged.forEach(it => {
    const card = document.createElement("article");
    card.className = "rs-card";
    card.innerHTML = `
      <h4>${escapeHtml(it.title)}</h4>
      <p>${escapeHtml(it.summary)}</p>
      <div class="rs-tags">
        ${it.tags.map(t => `<span class="rs-tag">${escapeHtml(t)}</span>`).join('')}
      </div>
      <div class="rs-actions">
        <button class="rs-btn" onclick="openModal(${it.id})">View</button>
        <a class="rs-btn" href="${it.url}" target="_blank" rel="noopener noreferrer">Open</a>
        <button class="rs-btn" onclick="copyCitation(${it.id})">Copy citation</button>
      </div>
      <div style="font-size:12px;color:#6b7770;margin-top:8px">
        ${escapeHtml(it.citeMark)} ${escapeHtml(it.citeText)}
      </div>
    `;
    rsList.appendChild(card);
  });

  renderPagination(pages);
}

function renderPagination(totalPages) {
  const container = document.getElementById("rs-pagination");
  container.innerHTML = "";
  for (let p = 1; p <= totalPages; p++) {
    const btn = document.createElement("button");
    btn.className = "rs-page";
    btn.textContent = p;
    if (p === currentPage) {
      btn.style.fontWeight = "700";
    }
    btn.onclick = () => {
      renderList(p, document.getElementById("rs-filter").value, document.getElementById("rs-search").value);
    };
    container.appendChild(btn);
  }
}

// ------------ Modal & Citation Logic ------------
function openModal(id) {
  const it = resources.find(r => r.id === id);
  if (!it) return;

  document.getElementById("modal-title").textContent = it.title;
  document.getElementById("modal-summary").textContent = it.summary;
  document.getElementById("modal-tags").textContent = it.tags.join(", ");
  document.getElementById("modal-link").href = it.url;
  document.getElementById("modal-cite").textContent = `${it.citeMark} — ${it.citeText}`;

  document.getElementById("rs-modal").style.display = "flex";
  document.getElementById("rs-modal").setAttribute("aria-hidden", "false");

  document.getElementById("rs-open-source").onclick = () => {
    window.open(it.url, "_blank");
  };
  document.getElementById("rs-copy-cite").onclick = () => {
    const text = `${it.title} — ${it.url}\nCitation: ${it.citeMark} ${it.citeText}`;
    navigator.clipboard.writeText(text).then(() => {
      alert("Citation copied");
    });
  };
}

document.getElementById("rs-close").onclick = () => {
  document.getElementById("rs-modal").style.display = "none";
  document.getElementById("rs-modal").setAttribute("aria-hidden", "true");
};

// Close modal with Escape
document.addEventListener("keydown", e => {
  if (e.key === "Escape") {
    document.getElementById("rs-modal").style.display = "none";
    document.getElementById("rs-modal").setAttribute("aria-hidden", "true");
  }
});

// ------------ Event Listeners ------------
document.getElementById("rs-search").addEventListener("input", () => {
  renderList(1, document.getElementById("rs-filter").value, document.getElementById("rs-search").value);
});
document.getElementById("rs-filter").addEventListener("change", () => {
  renderList(1, document.getElementById("rs-filter").value, document.getElementById("rs-search").value);
});
document.getElementById("rs-export").onclick = () => {
  const header = ["Title", "Summary", "URL", "Tags", "Citation"];
  const rows = resources.map(it => [
    it.title,
    it.summary,
    it.url,
    it.tags.join("|"),
    `${it.citeMark} ${it.citeText}`
  ]);
  const all = [header, ...rows];
  const csv = all.map(row =>
    row.map(cell => `"${(cell || "").toString().replace(/"/g, '""')}"`).join(',')
  ).join('\n');

  const blob = new Blob([csv], { type: "text/csv;charset=utf-8" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "hydroponics_resources.csv";
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
};

// ------------ Initial Render ------------
renderList();
</script>


